webpackJsonp([1],{107:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.actions={}}return o(e,[{key:"addAction",value:function(e,t){this.actions[e]=this.getActions(e).concat([t])}},{key:"getActions",value:function(e){return this.actions[e]||[]}}]),e}();window.ss=window.ss||{},window.ss.tinymceactions=window.ss.tinymceactions||new a,t.default=window.ss.tinymceactions},108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={SET_SCHEMA:"SET_SCHEMA",SET_SCHEMA_STATE_OVERRIDES:"SET_SCHEMA_STATE_OVERRIDES",SET_SCHEMA_LOADING:"SET_SCHEMA_LOADING"};t.default=r},11:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(14),p=r(c),f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){if(void 0!==this.props.cmsEvents){this.cmsEvents=this.props.cmsEvents;for(var e in this.cmsEvents)({}).hasOwnProperty.call(this.cmsEvents,e)&&(0,p.default)(document).on(e,this.cmsEvents[e].bind(this))}}},{key:"componentWillUnmount",value:function(){for(var e in this.cmsEvents)({}).hasOwnProperty.call(this.cmsEvents,e)&&(0,p.default)(document).off(e)}},{key:"emitCmsEvent",value:function(e,t){(0,p.default)(document).trigger(e,t)}}]),t}(u.Component);f.propTypes={cmsEvents:l.default.PropTypes.object},t.default=f},135:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),p=n(27),f=r(p),d=n(91),h=r(d),m=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"componentDidMount",value:function(){if(this.props.autoFocus){var e=f.default.findDOMNode(this);if(e){var t=e.querySelector("input, select, textarea");t&&t.focus()}}}},{key:"renderMessages",value:function(){return Array.isArray(this.props.messages)?this.props.messages.map(function(e,t){return c.default.createElement(h.default,s({key:t,className:t?"":"message-box--panel-top"},e))}):null}},{key:"render",value:function(){var e=!1!==this.props.valid,t=this.props.mapFieldsToComponents(this.props.fields),n=this.props.mapActionsToComponents(this.props.actions),r=this.renderMessages(),o=["form"];!1===e&&o.push("form--invalid"),this.props.attributes&&this.props.attributes.className&&o.push(this.props.attributes.className);var a=Object.assign({},this.props.attributes,{onSubmit:this.props.handleSubmit,className:o.join(" ")});return c.default.createElement("form",a,t&&c.default.createElement("fieldset",null,r,this.props.afterMessages,t),n&&n.length?c.default.createElement("div",{className:"btn-toolbar",role:"group"},n):null)}}]),t}(l.Component);m.propTypes={autoFocus:l.PropTypes.bool,valid:l.PropTypes.bool,actions:l.PropTypes.array,afterMessages:l.PropTypes.node,attributes:l.PropTypes.shape({action:l.PropTypes.string.isRequired,className:l.PropTypes.string,encType:l.PropTypes.string,id:l.PropTypes.string,method:l.PropTypes.string.isRequired}),fields:l.PropTypes.array.isRequired,handleSubmit:l.PropTypes.func,mapActionsToComponents:l.PropTypes.func.isRequired,mapFieldsToComponents:l.PropTypes.func.isRequired,messages:l.PropTypes.arrayOf(l.PropTypes.shape({extraClass:l.PropTypes.string,value:l.PropTypes.any,type:l.PropTypes.string}))},t.default=m},136:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.schemaPropType=t.basePropTypes=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(0),f=r(p),d=n(38),h=r(d),m=n(69),y=r(m),v=n(11),b=r(v),g=n(139),w=r(g),_=n(92),O=r(_),j=n(47),T=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.schema.schema;return n.state={submittingAction:null},n.submitApi=O.default.createEndpointFetcher({url:r.attributes.action,method:r.attributes.method}),n.mapActionsToComponents=n.mapActionsToComponents.bind(n),n.mapFieldsToComponents=n.mapFieldsToComponents.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleAction=n.handleAction.bind(n),n.buildComponent=n.buildComponent.bind(n),n.validateForm=n.validateForm.bind(n),n}return s(t,e),c(t,[{key:"validateForm",value:function(e){var t=this;if("function"==typeof this.props.validate)return this.props.validate(e);if(!this.props.schema||!this.props.schema.schema)return{};var n=new w.default(e);return Object.entries(e).reduce(function(e,r){var a=l(r,1),i=a[0],s=(0,m.findField)(t.props.schema.schema.fields,i),u=n.validateFieldSchema(s),c=u.valid,p=u.errors;if(c)return e;var d=p.map(function(e,t){return f.default.createElement("span",{key:t,className:"form__validation-message"},e)});return Object.assign({},e,o({},i,{type:"error",value:{react:d}}))},{})}},{key:"handleAction",value:function(e){"function"==typeof this.props.handleAction&&this.props.handleAction(e,this.props.values),e.isPropagationStopped()||this.setState({submittingAction:e.currentTarget.name})}},{key:"handleSubmit",value:function(e){var t=this,n=this.state.submittingAction?this.state.submittingAction:this.props.schema.schema.actions[0].name,r=Object.assign({},e,o({},n,1)),a=this.props.responseRequestedSchema.join(),i={"X-Formschema-Request":a,"X-Requested-With":"XMLHttpRequest"},s=function(e){return t.submitApi(e||r,i).then(function(e){return t.setState({submittingAction:null}),e}).catch(function(e){throw t.setState({submittingAction:null}),e})};return"function"==typeof this.props.handleSubmit?this.props.handleSubmit(r,n,s):s()}},{key:"buildComponent",value:function(e){var t=e,n=null!==t.schemaComponent?this.context.injector.get(t.schemaComponent):this.getComponentForDataType(t.schemaType);if(null===n)return null;if(null!==t.schemaComponent&&void 0===n)throw Error("Component not found in injector: "+t.schemaComponent);t=Object.assign({},t,t.input),delete t.input;var r=this.props.createFn;return"function"==typeof r?r(n,t):f.default.createElement(n,u({key:t.id},t))}},{key:"mapFieldsToComponents",value:function(e){var t=this,n=this.props.baseFieldComponent;return e.map(function(e){var r=e;return e.children&&(r=Object.assign({},e,{children:t.mapFieldsToComponents(e.children)})),r=Object.assign({onAutofill:t.props.onAutofill,formid:t.props.form},r),"Structural"===e.schemaType||!0===e.readOnly?t.buildComponent(r):f.default.createElement(n,u({key:r.id},r,{component:t.buildComponent}))})}},{key:"getComponentForDataType",value:function(e){var t=this.context.injector.get;switch(e){case"String":case"Text":return t("TextField");case"Date":return t("DateField");case"Time":return t("TimeField");case"Datetime":return t("DatetimeField");case"Hidden":return t("HiddenField");case"SingleSelect":return t("SingleSelectField");case"Custom":return t("GridField");case"Structural":return t("CompositeField");case"Boolean":return t("CheckboxField");case"MultiSelect":return t("CheckboxSetField");default:return null}}},{key:"mapActionsToComponents",value:function(e){var t=this;return e.map(function(e){var n=Object.assign({},e);return e.children?n.children=t.mapActionsToComponents(e.children):(n.handleClick=t.handleAction,t.props.submitting&&t.state.submittingAction===e.name&&(n.loading=!0)),t.buildComponent(n)})}},{key:"normalizeFields",value:function(e,t){var n=this;return e.map(function(e){var r=t&&t.fields?t.fields.find(function(t){return t.id===e.id}):{},o=h.default.recursive(!0,(0,m.schemaMerge)(e,r),{schemaComponent:e.component});return e.children&&(o.children=n.normalizeFields(e.children,t)),o})}},{key:"normalizeActions",value:function(e){var t=this;return e.map(function(e){var n=h.default.recursive(!0,e,{schemaComponent:e.component});return e.children&&(n.children=t.normalizeActions(e.children)),n})}},{key:"render",value:function(){var e=this.props.schema.schema,t=this.props.schema.state,n=this.props.baseFormComponent,r=Object.assign({},e.attributes,{className:e.attributes.class,encType:e.attributes.enctype});delete r.class,delete r.enctype;var o=this.props,a=o.asyncValidate,i=o.onSubmitFail,s=o.onSubmitSuccess,u=o.shouldAsyncValidate,l=o.touchOnBlur,c=o.touchOnChange,p=o.persistentSubmitErrors,d=o.form,h=o.afterMessages,m=o.autoFocus,v={form:d,afterMessages:h,fields:this.normalizeFields(e.fields,t),actions:this.normalizeActions(e.actions),attributes:r,data:e.data,initialValues:(0,y.default)(e,t),onSubmit:this.handleSubmit,valid:t&&t.valid,messages:t&&Array.isArray(t.messages)?t.messages:[],mapActionsToComponents:this.mapActionsToComponents,mapFieldsToComponents:this.mapFieldsToComponents,asyncValidate:a,onSubmitFail:i,onSubmitSuccess:s,shouldAsyncValidate:u,touchOnBlur:l,touchOnChange:c,persistentSubmitErrors:p,validate:this.validateForm,autoFocus:m};return f.default.createElement(n,v)}}]),t}(b.default),P=p.PropTypes.shape({id:p.PropTypes.string,schema:p.PropTypes.shape({attributes:p.PropTypes.shape({class:p.PropTypes.string,enctype:p.PropTypes.string}),fields:p.PropTypes.array.isRequired}),state:p.PropTypes.shape({fields:p.PropTypes.array}),loading:p.PropTypes.boolean,stateOverride:p.PropTypes.shape({fields:p.PropTypes.array})}),S={createFn:p.PropTypes.func,handleSubmit:p.PropTypes.func,handleAction:p.PropTypes.func,asyncValidate:p.PropTypes.func,onSubmitFail:p.PropTypes.func,onSubmitSuccess:p.PropTypes.func,shouldAsyncValidate:p.PropTypes.func,touchOnBlur:p.PropTypes.bool,touchOnChange:p.PropTypes.bool,persistentSubmitErrors:p.PropTypes.bool,validate:p.PropTypes.func,values:p.PropTypes.object,submitting:p.PropTypes.bool,baseFormComponent:p.PropTypes.func.isRequired,baseFieldComponent:p.PropTypes.func.isRequired,responseRequestedSchema:p.PropTypes.arrayOf(p.PropTypes.oneOf(["schema","state","errors","auto"]))};T.propTypes=Object.assign({},S,{form:p.PropTypes.string.isRequired,schema:P.isRequired,autoFocus:p.PropTypes.bool}),T.defaultProps={responseRequestedSchema:["auto"],autoFocus:!1},t.basePropTypes=S,t.schemaPropType=P,t.default=(0,j.withInjector)(T)},137:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(18),p=r(c),f=n(30),d=n(11),h=r(d),m=n(138),y=r(m),v=n(41),b=r(v),g=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmit=n.handleSubmit.bind(n),n.handleHide=n.handleHide.bind(n),n.clearResponse=n.clearResponse.bind(n),n.handleLoadingError=n.handleLoadingError.bind(n),n}return i(t,e),s(t,[{key:"handleLoadingError",value:function(e){if(this.props.showErrorMessage){var t=e.errors&&e.errors[0];this.setState({response:t.value,error:!0})}"function"==typeof this.props.onLoadingError&&this.props.onLoadingError(e)}},{key:"getForm",value:function(){return this.props.schemaUrl?l.default.createElement(y.default,{schemaUrl:this.props.schemaUrl,handleSubmit:this.handleSubmit,handleAction:this.props.handleAction,onLoadingError:this.handleLoadingError}):null}},{key:"getResponse",value:function(){if(!this.state||!this.state.response)return null;var e="";return e=this.state.error?this.props.responseClassBad||"response error":this.props.responseClassGood||"response good",l.default.createElement("div",{className:e},(0,b.default)("span",{html:this.state.response}))}},{key:"clearResponse",value:function(){this.setState({response:null})}},{key:"handleHide",value:function(){this.clearResponse(),"function"==typeof this.props.handleHide&&this.props.handleHide()}},{key:"handleSubmit",value:function(e,t,n){var r=this;this.clearResponse();var o=null;if(!(o="function"==typeof this.props.handleSubmit?this.props.handleSubmit(e,t,n):n()))throw new Error("Promise was not returned for submitting");return o.then(function(e){return e&&r.setState({response:e.message,error:!1}),e}).catch(function(e){e.then(function(e){r.setState({response:e,error:!0})})}),o}},{key:"renderHeader",value:function(){return!1!==this.props.title?l.default.createElement(f.Modal.Header,{closeButton:!0},l.default.createElement(f.Modal.Title,null,this.props.title)):"function"==typeof this.props.handleHide?l.default.createElement("button",{type:"button",className:"close form-builder-modal__close-button",onClick:this.handleHide,"aria-label":p.default._t("Admin.CLOSE","Close")},l.default.createElement("span",{"aria-hidden":"true"},"×")):null}},{key:"render",value:function(){var e=this.getForm(),t=this.getResponse();return l.default.createElement(f.Modal,{show:this.props.show,onHide:this.handleHide,className:this.props.className,dialogClassName:this.props.dialogClassName,bsSize:this.props.bsSize},this.renderHeader(),l.default.createElement(f.Modal.Body,{className:this.props.bodyClassName},t,e,this.props.children))}}]),t}(h.default);g.propTypes={show:l.default.PropTypes.bool,title:l.default.PropTypes.oneOfType([l.default.PropTypes.string,l.default.PropTypes.bool]),className:l.default.PropTypes.string,bodyClassName:l.default.PropTypes.string,handleHide:l.default.PropTypes.func,schemaUrl:l.default.PropTypes.string,handleSubmit:l.default.PropTypes.func,handleAction:l.default.PropTypes.func,responseClassGood:l.default.PropTypes.string,responseClassBad:l.default.PropTypes.string,showErrorMessage:l.default.PropTypes.bool},g.defaultProps={show:!1,title:null},t.default=g},138:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n=e.schemas[t.schemaUrl],r=e.form&&e.form[t.schemaUrl];return{schema:n,submitting:r&&r.submitting,values:r&&r.values,stateOverrides:n&&n.stateOverride,loading:n&&n.metadata&&n.metadata.loading}}function l(e){return{actions:{schema:(0,h.bindActionCreators)(O,e),reduxForm:(0,h.bindActionCreators)({autofill:g.autofill,initialize:g.initialize},e)}}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(0),f=r(p),d=n(35),h=n(34),m=n(77),y=r(m),v=n(57),b=r(v),g=n(171),w=n(69),_=n(84),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(_),j=n(38),T=r(j),P=n(135),S=r(P),E=n(136),k=r(E),C=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmit=n.handleSubmit.bind(n),n.clearSchema=n.clearSchema.bind(n),n.reduceSchemaErrors=n.reduceSchemaErrors.bind(n),n.handleAutofill=n.handleAutofill.bind(n),n}return s(t,e),c(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"componentDidUpdate",value:function(e){this.props.schemaUrl!==e.schemaUrl&&(this.clearSchema(e.schemaUrl),this.fetch())}},{key:"componentWillUnmount",value:function(){this.clearSchema(this.props.schemaUrl)}},{key:"getMessages",value:function(e){var t={};return e&&e.fields&&e.fields.forEach(function(e){e.message&&(t[e.name]=e.message)}),t}},{key:"clearSchema",value:function(e){e&&((0,g.destroy)(e),this.props.actions.schema.setSchema(e,null))}},{key:"handleSubmit",value:function(e,t,n){var r=this,a=null,i=function(){return n().then(function(e){var t=e;if(t){t=r.reduceSchemaErrors(t),r.props.actions.schema.setSchema(r.props.schemaUrl,t);var n=t.schema||r.props.schema.schema;if(t.state){var a=t.state.fields.reduce(function(e,t){if(!n)return e;var r=(0,w.findField)(n.fields,t.name);return r&&"Structural"!==r.schemaType&&!0!==r.readOnly?Object.assign({},e,o({},t.name,t.value)):e},{});r.props.actions.reduxForm.initialize(r.props.schemaUrl,a)}}return t})};if(!(a="function"==typeof this.props.handleSubmit?this.props.handleSubmit(e,t,i):n()))throw new Error("Promise was not returned for submitting");return a.then(function(e){if(!e||!e.state)return e;var t=r.getMessages(e.state);if(Object.keys(t).length)throw new g.SubmissionError(t);return e})}},{key:"reduceSchemaErrors",value:function(e){if(!e.errors)return e;var t=Object.assign({},e);return t.state||(t=Object.assign({},t,{state:this.props.schema.state})),t=Object.assign({},t,{state:Object.assign({},t.state,{fields:t.state.fields.map(function(t){return Object.assign({},t,{message:e.errors.find(function(e){return e.field===t.name})})}),messages:e.errors.filter(function(e){return!e.field})})}),delete t.errors,(0,b.default)(t)}},{key:"overrideStateData",value:function(e){if(!this.props.stateOverrides||!e)return e;var t=this.props.stateOverrides.fields,n=e.fields;return t&&n&&(n=n.map(function(e){var n=t.find(function(t){return t.name===e.name});return n?T.default.recursive(!0,e,n):e})),Object.assign({},e,this.props.stateOverrides,{fields:n})}},{key:"callFetch",value:function(e){return(0,y.default)(this.props.schemaUrl,{headers:{"X-FormSchema-Request":e.join(",")},credentials:"same-origin"}).then(function(e){return e.json()})}},{key:"fetch",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=["auto"];return e&&o.push("schema"),n&&o.push("state"),r&&o.push("errors"),this.props.loading?Promise.resolve({}):(this.props.actions.schema.setSchemaLoading(this.props.schemaUrl,!0),this.callFetch(o).then(function(e){if(t.props.actions.schema.setSchemaLoading(t.props.schemaUrl,!1),"function"==typeof t.props.onFetchingSchema&&t.props.onFetchingSchema(),e.errors&&"function"==typeof t.props.onLoadingError)return t.props.onLoadingError(e);if(void 0!==e.id){var n=Object.assign({},e,{id:t.props.schemaUrl,state:t.overrideStateData(e.state)});return t.props.actions.schema.setSchema(t.props.schemaUrl,n),n}return e}).catch(function(e){if(t.props.actions.schema.setSchemaLoading(t.props.schemaUrl,!1),"function"==typeof t.props.onLoadingError)return t.props.onLoadingError({errors:[{value:e.message,type:"error"}]});throw e}))}},{key:"handleAutofill",value:function(e,t){this.props.actions.reduxForm.autofill(this.props.schemaUrl,e,t)}},{key:"render",value:function(){if(!this.props.schema||!this.props.schema.schema||this.props.loading)return null;var e=Object.assign({},this.props,{form:this.props.schemaUrl,onSubmitSuccess:this.props.onSubmitSuccess,handleSubmit:this.handleSubmit,onAutofill:this.handleAutofill});return f.default.createElement(k.default,e)}}]),t}(p.Component);C.propTypes=Object.assign({},E.basePropTypes,{actions:p.PropTypes.shape({schema:p.PropTypes.object,reduxFrom:p.PropTypes.object}),schemaUrl:p.PropTypes.string.isRequired,schema:E.schemaPropType,form:p.PropTypes.string,submitting:p.PropTypes.bool,onFetchingSchema:p.PropTypes.func}),C.defaultProps={baseFormComponent:(0,g.reduxForm)()(S.default),baseFieldComponent:g.Field},t.default=(0,d.connect)(u,l)(C)},139:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(436),s=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(t){r(this,e),this.setValues(t)}return a(e,[{key:"setValues",value:function(e){this.values=e}},{key:"getFieldValue",value:function(e){var t=this.values[e];return"string"!=typeof t&&(t=void 0===t||null===t||!1===t?"":t.toString()),t}},{key:"validateValue",value:function(e,t,n){switch(t){case"equals":var r=this.getFieldValue(n.field);return s.default.equals(e,r);case"numeric":return s.default.isNumeric(e);case"date":return s.default.isDate(e);case"alphanumeric":return s.default.isAlphanumeric(e);case"alpha":return s.default.isAlpha(e);case"regex":return s.default.matches(e,n.pattern);case"max":return e.length<=n.length;case"email":return s.default.isEmail(e);default:return console.warn("Unknown validation rule used: '"+t+"'"),!1}}},{key:"validateFieldSchema",value:function(e){return this.validateField(e.name,e.validation,null!==e.leftTitle?e.leftTitle:e.title,e.customValidationMessage)}},{key:"getMessage",value:function(e,t){var n="";if("string"==typeof t.message)n=t.message;else switch(e){case"required":n="{name} is required.";break;case"equals":n="{name} are not equal.";break;case"numeric":n="{name} is not a number.";break;case"date":n="{name} is not a proper date format.";break;case"alphanumeric":n="{name} is not an alpha-numeric value.";break;case"alpha":n="{name} is not only letters.";break;default:n="{name} is not a valid value."}return t.title&&(n=n.replace("{name}",t.title)),n}},{key:"validateField",value:function(e,t,n,r){var a=this,i={valid:!0,errors:[]};if(!t)return i;var s=this.getFieldValue(e);if(""===s&&t.required){var u=Object.assign({title:""!==n?n:e},t.required);return{valid:!1,errors:[r||this.getMessage("required",u)]}}return Object.entries(t).forEach(function(t){var r=o(t,2),u=r[0],l=r[1],c=Object.assign({title:e},{title:n},l);if("required"!==u&&!a.validateValue(s,u,c)){var p=a.getMessage(u,c);i.valid=!1,i.errors.push(p)}}),r&&!i.valid&&(i.errors=[r]),i}}]),e}();t.default=u},14:function(e,t,n){"use strict";var r=void 0!==window.jQuery?window.jQuery:null;e.exports=r},140:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(0),f=r(p),d=n(93),h=r(d),m=function(e,t,n){var r=function(r){function p(){return a(this,p),i(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return s(p,r),c(p,[{key:"render",value:function(){var r={},a=t;if(a){if(!Array.isArray(a)){if("string"!=typeof a)throw new Error("\n            withInjector() passed an argument for dependencies that is "+(void 0===a?"undefined":l(a))+". \n            Must be a string or array of named dependencies.\n          ");a=[a]}var i=a.map(this.context.injector.get);if(n&&"function"==typeof n){if(r=n.apply(void 0,o(i)),"object"!==(void 0===r?"undefined":l(r)))throw new Error("\n              mapDepedenciesToProps parameter passed to inject() \n              should return an object that maps prop names to dependencies\n             ")}else for(var s=0;s<a.length;s++)r[a[s]]=i[s]}var c=u({},this.props,r);return f.default.createElement(e,c)}}]),p}(f.default.Component);return r.contextTypes=h.default,r.displayName="inject(\n    "+(e.displayName||e.name||"Component")+"\n  )",r};t.default=m},141:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=function(t){function n(){return o(this,n),a(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),u(n,[{key:"getChildContext",value:function(){return{injector:{get:f.default.get}}}},{key:"render",value:function(){return c.default.createElement(e,this.props)}}]),n}(c.default.Component);return t.childContextTypes={injector:c.default.PropTypes.shape({get:c.default.PropTypes.func})},t}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),p=n(83),f=r(p);t.default=s},142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(93),a=function(e){return e&&e.__esModule?e:{default:e}}(o),i=function(e){return e.contextTypes=r({},e.contextTypes,a.default),e.displayName="withInjector(\n    "+(e.displayName||e.name||"Component")+"\n  )",e};t.default=i},18:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.defaultLocale="en_US",this.currentLocale=this.detectLocale(),this.lang={}}return o(e,[{key:"setLocale",value:function(e){this.currentLocale=e}},{key:"getLocale",value:function(){return null!==this.currentLocale?this.currentLocale:this.defaultLocale}},{key:"_t",value:function(e,t,n,r){var o=this.getLocale().replace(/_[\w]+/i,""),a=this.defaultLocale.replace(/_[\w]+/i,"");return this.lang&&this.lang[this.getLocale()]&&this.lang[this.getLocale()][e]?this.lang[this.getLocale()][e]:this.lang&&this.lang[o]&&this.lang[o][e]?this.lang[o][e]:this.lang&&this.lang[this.defaultLocale]&&this.lang[this.defaultLocale][e]?this.lang[this.defaultLocale][e]:this.lang&&this.lang[a]&&this.lang[a][e]?this.lang[a][e]:t||""}},{key:"addDictionary",value:function(e,t){void 0===this.lang[e]&&(this.lang[e]={});for(var n in t)this.lang[e][n]=t[n]}},{key:"getDictionary",value:function(e){return this.lang[e]}},{key:"stripStr",value:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}},{key:"stripStrML",value:function(e){for(var t=e.split("\n"),n=0;n<t.length;n+=1)t[n]=stripStr(t[n]);return stripStr(t.join(" "))}},{key:"sprintf",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(0===n.length)return e;var o=new RegExp("(.?)(%s)","g"),a=0;return e.replace(o,function(e,t,r,o,i){return"%"===t?e:t+n[a++]})}},{key:"inject",value:function(e,t){var n=new RegExp("{([A-Za-z0-9_]*)}","g");return e.replace(n,function(e,n,r,o){return t[n]?t[n]:e})}},{key:"detectLocale",value:function(){var t,n;if(!(t=document.body.getAttribute("lang")))for(var r=document.getElementsByTagName("meta"),o=0;o<r.length;o++)r[o].attributes["http-equiv"]&&"content-language"==r[o].attributes["http-equiv"].nodeValue.toLowerCase()&&(t=r[o].attributes.content.nodeValue);t||(t=this.defaultLocale);var a=t.match(/([^-|_]*)[-|_](.*)/);if(2==t.length){for(var i in e.lang)if(i.substr(0,2).toLowerCase()==t.toLowerCase()){n=i;break}}else a&&(n=a[1].toLowerCase()+"_"+a[2].toUpperCase());return n}},{key:"addEvent",value:function(e,t,n,r){return e.addEventListener?(e.addEventListener(t,n,r),!0):e.attachEvent?e.attachEvent("on"+t,n):void console.log("Handler could not be attached")}}]),e}(),i=new a;window.ss=void 0!==window.ss?window.ss:{},window.ss.i18n=window.i18n=i,t.default=i},202:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return{actions:{schema:(0,f.bindActionCreators)(v,e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.createInsertLinkModal=t.InsertLinkModal=void 0;var u=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),p=r(c),f=n(34),d=n(35),h=n(137),m=r(h),y=n(84),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(y),b=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmit=n.handleSubmit.bind(n),n.setOverrides(e.show?e:null),n}return i(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){(e.show&&!this.props.show||!e.show&&this.props.show)&&this.setOverrides(e.show?e:null)}},{key:"componentWillUnmount",value:function(){this.setOverrides()}},{key:"setOverrides",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){if(e.schemaUrl){var t=Object.assign({},e.fileAttributes);delete t.ID;var n={fields:Object.entries(t).map(function(e){var t=u(e,2);return{name:t[0],value:t[1]}})};this.props.actions.schema.setSchemaStateOverrides(e.schemaUrl,n)}}else{var r=e&&e.schemaUrl||this.props.schemaUrl;r&&this.props.actions.schema.setSchemaStateOverrides(r,null)}}},{key:"getModalProps",value:function(){var e=Object.assign({},this.props,{handleSubmit:this.handleSubmit,handleHide:this.props.onHide});return delete e.onHide,delete e.onInsert,delete e.sectionConfig,e}},{key:"handleSubmit",value:function(e,t){switch(t){case"action_cancel":this.props.onHide();break;default:this.props.onInsert(e,t)}return Promise.resolve()}},{key:"render",value:function(){var e=this.getModalProps();return p.default.createElement(m.default,e)}}]),t}(c.Component);b.propTypes={show:c.PropTypes.bool,schemaUrl:c.PropTypes.string,onInsert:c.PropTypes.func.isRequired,onHide:c.PropTypes.func.isRequired,actions:c.PropTypes.object},b.defaultProps={};var g=function(e,t){function n(n){var r=n.config.sections.find(function(t){return t.name===e});return{sectionConfig:r,schemaUrl:""+r.form[t].schemaUrl}}return(0,d.connect)(n,s)(b)};t.InsertLinkModal=b,t.createInsertLinkModal=g,t.default=(0,d.connect)(function(){return{}},s)(b)},41:function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&void 0!==t.react)return s.default.createElement(e,n,t.react);if(t&&void 0!==t.html){if(null!==t.html){var r={__html:t.html};return s.default.createElement(e,a({},n,{dangerouslySetInnerHTML:r}))}return null}var i=null;if((i=t&&void 0!==t.text?t.text:t)&&"object"===(void 0===i?"undefined":o(i)))throw new Error("Unsupported string value "+JSON.stringify(i));return null!==i&&void 0!==i?s.default.createElement(e,n,i):null}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var i=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(i)},449:function(e,t){},47:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.inject=t.withInjector=t.provideInjector=void 0;var o=n(141),a=r(o),i=n(142),s=r(i),u=n(140),l=r(u),c=n(83),p=r(c);t.provideInjector=a.default,t.withInjector=s.default,t.inject=l.default,t.default=p.default},69:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return void 0===t?e:u.default.recursive(!0,e,{data:t.data,source:t.source,message:t.message,valid:t.valid,value:t.value})}function a(e,t){var n=null;if(!e)return n;n=e.find(function(e){return e.name===t});var r=!0,o=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value;if(n)break;n=a(l.children,t)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}function i(e,t){return t?t.fields.reduce(function(t,n){var o=a(e.fields,n.name);return o?"Structural"===o.type||!0===o.readOnly?t:Object.assign({},t,r({},o.name,n.value)):t},{}):{}}Object.defineProperty(t,"__esModule",{value:!0}),t.schemaMerge=o,t.findField=a,t.default=i;var s=n(38),u=function(e){return e&&e.__esModule?e:{default:e}}(s)},83:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(435),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n(34),u={},l={},c=["before","after"],p=!1,f=function(e){c.forEach(function(t){if(void 0!==e[t]&&"string"!=typeof e[t]&&!Array.isArray(e[t]))throw new Error("Injector.update() key "+t+" must be a string or array")})},d=function(e){return function(){if(p)throw new Error("Cannot mutate DI container after it has been initialised");e.apply(void 0,arguments)}},h=function(e,t){return[e.displayName||e.name||"Component"].concat(r(t)).reduce(function(e,t){return t+"("+e+")"})},m=function(e){return e.map(function(e){var t=o({},e);return c.forEach(function(n){Array.isArray(e[n])?t[n]=e[n]:t[n]=e[n]?[e[n]]:[]}),c.every(function(e){return!t[e].length})&&(t.after=["__HEAD__"],t.before=["__TAIL__"]),t})},y=function(e){var t=null;return c.forEach(function(n){if(e[n].includes("*")){if(e[n].length>1)throw new Error("\n          Key "+n+" on "+e.name+' should only specify one key \n          if using the "*" wildcard\n        ');if(t)throw new Error("\n          Cannot specify a "+n+" rule on "+e.name+" if a wildcard \n          has been specified\n        ");t=n}}),t},v=function(e){var t=["__HEAD__","__TAIL__"],n=[t],r=[];return m(e).forEach(function(e){var t=e.name,r=y(e);"after"===r?n.push(["__TAIL__",t]):"before"===r?n.push([t,"__HEAD__"]):(n.push([t,"__TAIL__"]),n.push(["__HEAD__",t]),e.before.forEach(function(e){n.push([t,e])}),e.after.forEach(function(e){n.push([e,t])}))}),(0,i.default)(n).filter(function(e){return!t.includes(e)}).forEach(function(t){r=r.concat(e.filter(function(e){return e.name===t}))}),r},b=function(e,t,n){f(e),u[t]||(u[t]=[]),u[t].push(o({},e,{factory:n}))},g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(l[e]&&!0!==n.force)throw new Error("\n      Tried to register service "+e+" more than once. This practice is discouraged. Consider\n      using Injector.update() to enhance the service rather than override it completely.\n      Otherwise, invoke the register() function with { force: true } as the third argument.\n     ");l[e]=t},w=function(e){if(!p)throw new Error("\n      Injector.get(): Attempted to access DI layer before it was initialised.\n      Did you forget to invoke Injector.load()?");if(!l[e])throw new Error("Injector.get(): Component "+e+" does not exist");return l[e]},_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o({name:e},n);f(r),t(function(e,t,n){b(o({},r,{displayName:n}),e,t)})},O=function(){Object.keys(u).forEach(function(e){if(u.hasOwnProperty(e)){var t=v(u[e]),n=l[e],o=t.map(function(e){return e.factory}),a=t.map(function(e){return e.displayName||e.name}),i=s.compose.apply(void 0,r(o))(n);i.displayName=h(n,a),l[e]=i}}),p=!0},j={get:w,load:O,transform:d(_),register:d(g)};t.default=j},84:function(e,t,n){"use strict";function r(e,t){return{type:s.default.SET_SCHEMA,payload:Object.assign({id:e},t)}}function o(e,t){return{type:s.default.SET_SCHEMA_STATE_OVERRIDES,payload:{id:e,stateOverride:t}}}function a(e,t){return{type:s.default.SET_SCHEMA_LOADING,payload:{id:e,loading:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.setSchema=r,t.setSchemaStateOverrides=o,t.setSchemaLoading=a;var i=n(108),s=function(e){return e&&e.__esModule?e:{default:e}}(i)},91:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(11),p=r(c),f=n(30),d=n(41),h=r(d),m=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDismiss=n.handleDismiss.bind(n),n.state={visible:!0},n}return i(t,e),s(t,[{key:"handleDismiss",value:function(){"function"==typeof this.props.onDismiss?this.props.onDismiss():this.setState({visible:!1})}},{key:"getMessageStyle",value:function(){switch(this.props.type){case"good":case"success":return"success";case"info":return"info";case"warn":case"warning":return"warning";default:return"danger"}}},{key:"getMessageProps",value:function(){return{className:["message-box","message-box--"+(this.props.type||"no-type"),this.props.className,this.props.extraClass].join(" "),bsStyle:this.props.bsStyle||this.getMessageStyle(),bsClass:this.props.bsClass,onDismiss:this.props.closeLabel?this.handleDismiss:null,closeLabel:this.props.closeLabel}}},{key:"render",value:function(){if("boolean"!=typeof this.props.visible&&this.state.visible||this.props.visible){var e=(0,h.default)("div",this.props.value);if(e)return l.default.createElement(f.Alert,this.getMessageProps(),e)}return null}}]),t}(p.default);m.propTypes={extraClass:u.PropTypes.string,value:u.PropTypes.any,type:u.PropTypes.string,onDismiss:u.PropTypes.func,closeLabel:u.PropTypes.string,visible:u.PropTypes.bool},m.defaultProps={extraClass:"",className:""},t.default=m},92:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=null;if(!(e.status>=200&&e.status<300))throw t=new Error(e.statusText),t.response=e,t;return e}function s(e){var t=null;if(e instanceof FormData||"string"==typeof e)t=e;else{if(!e||"object"!==(void 0===e?"undefined":m(e)))throw new Error("Invalid body type");t=JSON.stringify(e)}return t}function u(e,t){switch(e){case"application/x-www-form-urlencoded":return _.default.stringify(t);case"application/json":case"application/x-json":case"application/x-javascript":case"text/javascript":case"text/x-javascript":case"text/x-json":return JSON.stringify(t);default:throw new Error("Can't encode format: "+e)}}function l(e,t){switch(e){case"application/x-www-form-urlencoded":return _.default.parse(t);case"application/json":case"application/x-json":case"application/x-javascript":case"text/javascript":case"text/x-javascript":case"text/x-json":return JSON.parse(t);default:throw new Error("Can't decode format: "+e)}}function c(e,t){return""===t?e:e.match(/\?/)?e+"&"+t:e+"?"+t}function p(e){return e.text().then(function(t){return l(e.headers.get("Content-Type"),t)})}function f(e,t){return Object.keys(t).reduce(function(n,r){var o=e[r];return!o||!0!==o.remove&&!0!==o.querystring?Object.assign(n,a({},r,t[r])):n},{})}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{setFromData:!1},o=t;return o=c(o,u("application/x-www-form-urlencoded",Object.keys(n).reduce(function(t,o){var i=e[o],s=!0===r.setFromData&&!(i&&!0===i.remove),u=i&&!0===i.querystring&&!0!==i.remove;return s||u?Object.assign(t,a({},o,n[o])):t},{}))),o=Object.keys(e).reduce(function(t,r){var o=e[r].urlReplacement;return o?t.replace(o,n[r]):t},o)}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=n(77),v=r(y),b=n(186),g=r(b),w=n(164),_=r(w),O=n(38),j=r(O);g.default.polyfill();var T=function(){function e(){o(this,e),this.fetch=v.default}return h(e,[{key:"createEndpointFetcher",value:function(e){var t=this,n=Object.assign({method:"get",payloadFormat:"application/x-www-form-urlencoded",responseFormat:"application/json",payloadSchema:{},defaultData:{}},e),r={json:"application/json",urlencoded:"application/x-www-form-urlencoded"};return["payloadFormat","responseFormat"].forEach(function(e){r[n[e]]&&(n[e]=r[n[e]])}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Object.assign({},r,{Accept:n.responseFormat,"Content-Type":n.payloadFormat}),a=j.default.recursive({},n.defaultData,e),i=d(n.payloadSchema,n.url,a,{setFromData:"get"===n.method.toLowerCase()}),s="get"!==n.method.toLowerCase()?u(n.payloadFormat,f(n.payloadSchema,a)):"",l="get"===n.method.toLowerCase()?[i,o]:[i,s,o];return t[n.method.toLowerCase()].apply(t,l).then(p)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{method:"get",credentials:"same-origin",headers:t}).then(i)}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={"Content-Type":"application/x-www-form-urlencoded"};return this.fetch(e,{method:"post",credentials:"same-origin",body:s(t),headers:Object.assign({},r,n)}).then(i)}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.fetch(e,{method:"put",credentials:"same-origin",body:s(t),headers:n}).then(i)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.fetch(e,{method:"delete",credentials:"same-origin",body:s(t),headers:n}).then(i)}}]),e}(),P=new T;t.default=P},93:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={injector:o.default.PropTypes.shape({get:o.default.PropTypes.func})}},991:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),a=r(o),i=n(107),s=r(i),u=n(0),l=r(u),c=n(27),p=r(c),f=n(203),d=n(26),h=r(d),m=n(202),y=n(47);s.default.addAction("sslink",{text:a.default._t("Admin.LINKLABEL_EXTERNALURL","Link to external URL"),onclick:function(e){return e.execCommand("sslinkexternal")}});var v={init:function(e){e.addCommand("sslinkexternal",function(){window.jQuery("#"+e.id).entwine("ss").openLinkExternalDialog()})}},b="insert-link__dialog-wrapper--external",g=(0,y.provideInjector)((0,m.createInsertLinkModal)("SilverStripe\\Admin\\LeftAndMain","EditorExternalLink"));h.default.entwine("ss",function(e){e("textarea.htmleditor").entwine({openLinkExternalDialog:function(){var t=e("#"+b);t.length||(t=e('<div id="'+b+'" />'),e("body").append(t)),t.addClass("insert-link__dialog-wrapper"),t.setElement(this),t.open()}}),e("#"+b).entwine({renderModal:function(e){var t=this,n=ss.store,r=ss.apolloClient,o=function(){return t.close()},i=function(){return t.handleInsert.apply(t,arguments)},s=this.getOriginalAttributes();p.default.render(l.default.createElement(f.ApolloProvider,{store:n,client:r},l.default.createElement(g,{show:e,onInsert:i,onHide:o,title:a.default._t("Admin.LINK_EXTERNAL","Insert external link"),bodyClassName:"modal__dialog",className:"insert-link__dialog-wrapper--external",fileAttributes:s})),this[0])},buildAttributes:function(e){var t=this._super(e),n=t.href;return n.match(/:\/\//)||(n=window.location.protocol+"//"+n),n=n.replace(/:\/\/(#.*)$/,"$2"),n.match(/:\/\/$/)&&(n=""),t.href=n,t}})}),tinymce.PluginManager.add("sslinkexternal",function(e){return v.init(e)}),t.default=v}},[991]);